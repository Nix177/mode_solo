<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>L'Observatoire des Possibles</title>
    <style>
        body { margin: 0; padding: 0; font-family: 'Georgia', serif; background: #000; color: #fff; overflow: hidden; }
        
        /* Conteneur principal */
        #game-container {
            position: relative; width: 100vw; height: 100vh;
            display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
            background-size: cover; background-position: center; transition: background-image 1s ease;
        }

        /* Zone de texte narrative (Intro) */
        .slide-content {
            background: rgba(0, 0, 0, 0.85); padding: 40px; border-radius: 10px; border: 1px solid #444;
            max-width: 800px; text-align: center; margin-bottom: 20%;
            box-shadow: 0 0 50px rgba(0,0,0,1);
        }
        .slide-content h1 { font-size: 2.5em; color: #e0e0e0; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; }
        .slide-content p { font-size: 1.3em; line-height: 1.6; color: #ccc; }

        /* Zone de Chat */
        .chat-box {
            width: 100%; max-width: 900px; height: 60vh;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0));
            display: flex; flex-direction: column; padding: 20px;
        }
        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        
        /* Bulles de chat */
        .msg-row { display: flex; align-items: flex-end; gap: 15px; }
        .msg-row.user { flex-direction: row-reverse; }
        .msg-bubble {
            padding: 15px 25px; border-radius: 20px; font-size: 1.1em; line-height: 1.4; max-width: 70%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .msg-row.bot .msg-bubble { background: #1a1a1a; border: 1px solid #333; color: #ddd; border-bottom-left-radius: 2px; }
        .msg-row.user .msg-bubble { background: #4a5d75; color: white; border-bottom-right-radius: 2px; }
        
        /* Avatars */
        .chat-avatar-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #555; }

        /* Barre de saisie (Input) */
        #input-area {
            width: 100%; padding: 20px; background: rgba(0,0,0,0.9);
            display: flex; justify-content: center; gap: 10px; border-top: 1px solid #333;
        }
        #player-input {
            width: 600px; padding: 15px; font-size: 1.1em; border-radius: 5px; border: 1px solid #444; background: #222; color: white;
        }
        #send-btn {
            padding: 15px 30px; font-size: 1.1em; background: #666; color: white; border: none; cursor: pointer; border-radius: 5px; transition: 0.3s;
        }
        #send-btn:hover { background: #888; }

        /* Roster (Barre latérale des persos) */
        #roster-bar {
            position: absolute; right: 20px; top: 20px; display: flex; flex-direction: column; gap: 15px;
        }
        .roster-btn {
            width: 70px; height: 70px; border-radius: 50%; cursor: pointer;
            background-size: cover; border: 2px solid #555; transition: transform 0.2s;
            position: relative;
        }
        .roster-btn:hover { transform: scale(1.1); border-color: white; }
        .roster-tooltip {
            position: absolute; right: 80px; top: 20px; background: rgba(0,0,0,0.8);
            padding: 5px 10px; border-radius: 5px; display: none; white-space: nowrap;
        }
        .roster-btn:hover .roster-tooltip { display: block; }

        /* Contrôles Prof (Invisible pour le joueur en théorie, mais utile pour debug) */
        #teacher-controls { position: absolute; top: 10px; left: 10px; display: flex; gap: 10px; }
        .btn-next { padding: 10px 20px; background: #b94848; color: white; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="game-container">
        </div>

    <div id="input-area">
        <input type="text" id="player-input" placeholder="Que décidez-vous ? (ex: 'Je refuse de le tuer', 'Activez la machine')..." onkeypress="if(event.key==='Enter') sendPlayerAction()">
        <button id="send-btn" onclick="sendPlayerAction()">Envoyer</button>
    </div>

    <div id="roster-bar"></div>

    <div id="teacher-controls"></div>

    <script type="module" src="js/engine.js"></script>

</body>
</html>